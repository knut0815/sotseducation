function createRoseLegend(){var e=10,t=100,n=20,r=$("#roseGroningenLegendSquares").width(),a=Math.floor(r/t),o=Math.ceil(12/a),s=o*n,i=d3.select("#roseGroningenLegendSquares").append("svg").attr("width",r).attr("height",s),l=i.selectAll(".roseLegendSquare").data(roseGroningenColors).enter().append("g").attr("class","roseLegendSquare").attr("width",t).attr("height",n).attr("transform",function(e,t){return"translate("+100*Math.floor(t/o)+","+t%o*20+")"});l.append("rect").attr("width",e).attr("height",e).attr("transform","translate(10,0)").style("fill",function(e){return e}),l.append("text").attr("transform","translate("+(e+10+5)+","+e/2+")").style("text-anchor","start").attr("dy",".35em").attr("fill","#4F4F4F").style("font-size","10px").text(function(e,t){return roseGroningenProvincies[t]});var d=d3.select("#roseGroningenLegendCircles").append("svg").attr("width",$("#roseGroningenLegendCircles").width()).attr("height",$("#roseGroningenLegendCircles").height()/(mobileScreen?2:3));d.selectAll(".flowerLegend.circle").data([1,2,3]).enter().append("circle").attr("class","flowerLegend circle").attr("r",function(e){return e}).style("fill","#B5B5B5").attr("transform",function(e,t){return"translate("+(10*t+10)+",10)"}),d.append("text").attr("x",50).attr("y",10).attr("dy",".35em").style("text-anchor","start").attr("fill","#4F4F4F").style("font-size","11px").text("Dit is de provincie Groningen zelf. Omdat het percentage dat in Groningen blijft al binnen in elke plot aangegeven staat, is dit stukje express leeg gelaten").call(wrap,$("#roseGroningenLegendCircles").width()-100)}function drawRosesWO(e,t,n,r,a){function o(){$(".popover").each(function(){$(this).remove()})}function s(e,t,r){$(this).popover({placement:"auto top",container:".dataresource.rose",trigger:"manual",html:!0,content:function(){return"<span style='font-size: 11px;'><span style='color: #00A1DE; font-weight: bold;'>"+numFormatPercentDec(e.data)+"</span> verhuist van "+n[u[r]]+" naar <span style='color: #00A1DE; font-weight: bold;'>"+n[t]+"</span></span>"}}),$(this).popover("show")}function i(e,t){flowersGroningen.append("circle").attr("class","flower circle").attr("r",e).style("fill","#B5B5B5").attr("transform",function(e,n){return e.angle=2*Math.PI/24*(2*u[n]+1),"rotate("+(180*e.angle/Math.PI-90)+")translate("+(l+t*r)+",0)"})}{var l=.2*r,a=d3.scale.ordinal().domain([0,1,2,3,4,5,6,7,8,9,10,11]).range(a),d=d3.scale.linear().domain([0,.2]).range([0,1]),c=d3.layout.pie().sort(null).value(function(){return 1}).padAngle(.02),g=d3.svg.arc().innerRadius(function(e){return e.data<.005?0:l}).outerRadius(function(e){return e.data<.005?0:(r-l)*d(e.data)+l});flowersGroningen.selectAll(".solidArc.slice").data(c).enter().append("path").attr("fill",function(e,t){return a(t)}).attr("class","solidArc slice").attr("stroke","white").attr("d",g).each(function(e){this._current=e}).on("mouseover",function(e,t,n){s.call(this,e,t,n)}).on("mouseout",function(){o()})}flowersGroningen.append("text").attr("dy",".35em").style("font-size","12px").attr("class","flower titles").attr("fill","#6E6E6E").attr("text-anchor","middle").attr("transform","translate(0,"+(-r+20)+")").text(function(e,t){return educations[t]});flowersGroningen.append("text").attr("class","flower value").attr("x",0).attr("y",-7).attr("text-anchor","middle").attr("dy",".35em").style("font-size","12px").text(function(e,n){return numFormatPercent(t.WO[n])});flowersGroningen.append("text").attr("class","flower subValueText").attr("x",0).attr("y",6).attr("text-anchor","middle").attr("dy",".35em").attr("fill","#949494").style("font-size","8px").text("verhuist"),flowersGroningen.append("text").attr("class","flower subValueText").attr("x",0).attr("y",14).attr("text-anchor","middle").attr("dy",".35em").attr("fill","#949494").style("font-size","8px").text("niet");var u=[4,4,4];i(1,.05),i(2,.125),i(3,.22)}var roseGroningenPadding=0,roseGroningenRadius=120,roseDataGroningen={WO:[[.073,0,.03,.011,0,0,0,.008,.011,.003,.001,.01],[.121,.009,.087,.02,0,.001,.007,.048,.032,.029,0,.02],[.061,.007,.082,.033,0,.012,.019,.135,.079,.079,0,.049]]},roseGroningenDiagonal={WO:[.844,.609,.445]},roseGroningenColors=["#EFB605","#E79B01","#E35B0F","#DD092D","#C50046","#A70A61","#892E83","#604BA2","#2D6AA6","#089384","#25AE64","#7EB852"],roseGroningenProvincies=["Drenthe","Flevoland","Friesland","Gelderland","Groningen","Limburg","N. Brabant","N. Holland","Overijssel","Utrecht","Zeeland","Z. Holland"],educations=["MBO","HBO","WO"],roseGroningenWrapper=d3.select(".dataresource.roseGroningen").selectAll(".windRoses").data(roseDataGroningen.WO).enter().append("svg").attr("class","windRoses").attr("width",2*(1.2*roseGroningenRadius+roseGroningenPadding)).attr("height",2*(roseGroningenRadius+roseGroningenPadding)).attr("id",function(e,t){return"pie"+t}),flowersGroningen=roseGroningenWrapper.append("g").attr("transform","translate("+(roseGroningenRadius+roseGroningenPadding)+","+(roseGroningenRadius+roseGroningenPadding)+")");drawRosesWO(roseDataGroningen,roseGroningenDiagonal,roseGroningenProvincies,roseGroningenRadius,roseGroningenColors),createRoseLegend();
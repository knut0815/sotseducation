function drawChord(t,e,r){function n(){return"#00A1DE"}function a(){return d3.layout.chord().padding(.02).sortSubgroups(d3.descending).sortChords(d3.ascending)}function i(t){layout=a(),layout.matrix(t);var e=N.selectAll("g.group").data(layout.groups(),function(t){return t.index});e.exit().transition().duration(1500).style("opacity",0).remove();var r=e.enter().append("g").attr("class","group").on("mouseover",o(L)).on("mouseout",o(j));r.append("path").style("stroke",function(t,e){return""===A[e]?"none":n(t.index)}).style("fill",function(t,e){return""===A[e]?"none":n(t.index)}).style("pointer-events",function(t,e){return""===A[e]?"none":"auto"}).style("opacity",0).attr("transform",function(t,e){return t.pullOutSize=I*(e>T?-1:1),"translate("+t.pullOutSize+",0)"}),e.select("path").transition().duration(1500).style("opacity",1).attrTween("d",y(M)),e.append("text").attr("class","chordText").attr("dy",".35em").attr("x",0).attr("y",0).attr("fill","#8F8F8F").style("opacity",0).text(function(t){return A[t.index]}).call(wrapChord,120),e.select("text").transition().duration(1500).attr("transform",function(t,e){t.angle=(t.startAngle+t.endAngle)/2+P,t.pullOutSize=I*(e>T?-1:1);var r=F.centroid(t);return"translate("+(r[0]+t.pullOutSize)+","+r[1]+")rotate("+(180*t.angle/Math.PI-90)+")translate(20,0)"+(t.angle>Math.PI?"rotate(180)":"")}).attr("text-anchor",function(t){return t.angle>Math.PI?"end":"begin"}).style("opacity",1),r.append("title"),e.select("title").text(function(t,e){return numFormatPercentDec(t.value/H)+" mensen in "+A[e]});var i=N.selectAll("path.chord").data(layout.chords(),v),d=i.enter().append("path").attr("class","chord").style("stroke","none").style("fill","url(#gradientLinearPerLine)").style("stroke-opacity",0).style("opacity",0).style("pointer-events",function(t){return""===A[t.source.index]?"none":"auto"}).on("mouseover",c).on("mouseout",o(j));d.append("title"),i.select("title").text(function(t){return[numFormatPercentDec(t.source.value/H)," studenten van ",A[t.target.index]," naar de sector ",A[t.source.index]].join("")}),i.exit().transition().duration(500).style("opacity",0).remove(),i.transition().duration(1500).style("opacity",function(t){return""===A[t.source.index]?0:j}).attrTween("d",m(M)),M=layout}function o(t){return function(e,r){N.selectAll("path.chord").filter(function(t){return t.source.index!=r&&t.target.index!=r&&""!=A[t.source.index]}).transition().style("opacity",t)}}function c(t){var e=t;N.selectAll("path.chord").transition().style("opacity",function(t){return t.source.index==e.source.index&&t.target.index==e.target.index?j:L})}function d(t){return t.startAngle+P}function s(t){return t.endAngle+P}function l(){function t(t,e,r,n){var a=e.call(t,r,n),i=o.call(t,a,n),s=c.call(t,a,n)-l,u=d.call(t,a,n)-l;return{r:i,a0:[s],a1:[u],p0:[i*Math.cos(s),i*Math.sin(s)],p1:[i*Math.cos(u),i*Math.sin(u)]}}function e(t,e,r){var n=e[0]>=0?1:-1;return"A"+t+","+t+" 0 "+ +(r>s)+",1 "+(e[0]+n*I)+","+e[1]}function r(t){var e=t[0]>=0?1:-1;return"Q 0,0 "+(t[0]+e*I)+","+t[1]}function n(n,o){var c=t(this,a,n,o),d=t(this,i,n,o);return"M"+(c.p0[0]+I)+","+c.p0[1]+e(c.r,c.p1,c.a1-c.a0)+r(d.p0)+e(d.r,d.p1,d.a1-d.a0)+r(c.p0)+"Z"}var a=h,i=p,o=u,c=g,d=f,s=Math.PI,l=s/2;return n.radius=function(t){return arguments.length?(o=x(t),n):o},n.source=function(t){return arguments.length?(a=x(t),n):a},n.target=function(t){return arguments.length?(i=x(t),n):i},n.startAngle=function(t){return arguments.length?(c=x(t),n):c},n.endAngle=function(t){return arguments.length?(d=x(t),n):d},n}function u(t){return t.radius}function h(t){return t.source}function p(t){return t.target}function g(t){return t.startAngle}function f(t){return t.endAngle}function x(t){return"function"==typeof t?t:function(){return t}}function y(t){var e={};return t&&t.groups().forEach(function(t){e[t.index]=t}),function(t){var r,n=e[t.index];if(n)r=d3.interpolate(n,t);else{var a={startAngle:d(t),endAngle:d(t)};r=d3.interpolate(a,t)}return function(t){return F(r(t))}}}function v(t){return t.source.index<t.target.index?t.source.index+"-"+t.target.index:t.target.index+"-"+t.source.index}function m(t){var e={};return t&&t.chords().forEach(function(t){e[v(t)]=t}),function(r){var n,a=e[v(r)];if(a)r.source.index!=a.source.index&&(a={source:a.target,target:a.source}),n=d3.interpolate(a,r);else{if(t){var i=t.groups().filter(function(t){return t.index==r.source.index||t.index==r.target.index});a={source:i[0],target:i[1]||i[0]},r.source.index!=a.source.index&&(a={source:a.target,target:a.source})}else a=r;var o={source:{startAngle:a.source.startAngle,endAngle:a.source.startAngle},target:{startAngle:a.target.startAngle,endAngle:a.target.startAngle}};n=d3.interpolate(o,r)}return function(t){return G(n(t))}}}var M,A=["Administratief personeel","Ambachtslieden","Bedrijfsbeheer (vak)specialisten","Elementaire beroepen","Gezondheidszorg (vak)specialisten","IT (vak)specialisten","Juridisch/Culturele (vak)specialisten","Leidinggevende functies","Onderwijsgevenden","Verkopers en verleners persoonlijke diensten","Verzorgend personeel","Wetenschap/Techniek (vak)specialisten","Overig","","Techniek","Onderwijs","Landbouw","Kunst, Taal en Cultuur","Gezondheidszorg","Gedrag & Maatschappij","Economie",""],W=.5,T=13,b=17533,O=b,C=Math.round(b*W),k=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,65,44,57,39,123,1373,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,11,0,0,24,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,173,43,52,55,36,125,2413,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,16,13,23,10,37,54,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,161,24,17,0,2089,85,60,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,510,0,0,57,0,0,251,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,118,10,454,99,1537,271,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,76,21,10,15,125,41,261,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,2206,37,292,32,116,76,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,74,43,116,51,135,752,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,34,0,22,27,156,36,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1141,0,111,291,0,0,48,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,39,0,0,20,109,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,C],[232,32,173,32,161,510,16,76,32,96,15,1141,36,0,0,0,0,0,0,0,0,0],[65,0,43,16,24,0,118,21,2206,74,34,0,0,0,0,0,0,0,0,0,0,0],[44,0,52,13,17,0,10,10,37,43,0,111,39,0,0,0,0,0,0,0,0,0],[57,11,55,23,0,57,454,15,292,116,22,291,0,0,0,0,0,0,0,0,0,0],[39,0,36,10,2089,0,99,125,32,51,27,0,0,0,0,0,0,0,0,0,0,0],[123,0,125,37,85,0,1537,41,116,135,156,0,20,0,0,0,0,0,0,0,0,0],[1373,24,2413,54,60,251,271,261,76,752,36,48,109,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,C,0,0,0,0,0,0,0,0]],w=2*Math.PI/360*(C/(b+C))*360/4,S=21328,B=S,C=Math.round(S*W),z=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,320,0,42,0,88,122,1152,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,2187,0,43,0,19,0,105,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,0,0,0,20,19,285,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,428,0,192,0,354,219,686,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,0,37,0,1518,30,31,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,93,0,0,0,0,0,213,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,125,0,25,0,536,567,132,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,12,10,61,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,35,36,12,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,549,0,305,0,1069,621,2704,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,54,0,10,0,2095,1283,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,485,0,22,0,18,10,23,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1064,0,302,0,91,49,515,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,C],[320,2187,45,428,103,93,125,32,13,549,54,485,1064,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[42,43,0,192,37,0,25,0,0,305,10,22,302,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[88,19,20,354,1518,0,536,12,35,1069,2095,18,91,0,0,0,0,0,0,0,0,0],[122,0,19,219,30,0,567,10,36,621,1283,10,49,0,0,0,0,0,0,0,0,0],[1152,105,285,686,31,213,132,61,12,2704,112,23,515,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,C,0,0,0,0,0,0,0,0]],E=2*Math.PI/360*(C/(S+C))*360/4,R=Math.min(t,e)/2-(mobileScreen?80:100),D=.95*R,P=w,H=O,I=mobileScreen?20:50,j=.6,L=.02,F=(d3.format("%"),d3.svg.arc().innerRadius(D).outerRadius(R).startAngle(d).endAngle(s)),G=l().radius(D).startAngle(d).endAngle(s);chordWrapper.selectAll("g").remove();var N=chordWrapper.append("g").attr("id","circle").attr("transform","translate("+(t/2+r.left)+","+(e/2+r.top)+")");i(k),d3.select("#ChordHBObutton").on("click",function(){P=w,H=O,chordTitleWrapper.select(".chordTitleNiveau").text("HBO"),i(k)}),d3.select("#ChordMBObutton").on("click",function(){P=E,H=B,chordTitleWrapper.select(".chordTitleNiveau").text("MBO"),i(z)})}var mobileScreen=$(window).width()>400?!1:!0,chordMargin={left:50,top:10,right:50,bottom:10},chordWidth=Math.min($(".dataresource.chord").width(),800)-chordMargin.left-chordMargin.right,chordHeight=(mobileScreen?300:5*Math.min($(".dataresource.chord").width(),800)/6)-chordMargin.top-chordMargin.bottom,svgChord=d3.select(".dataresource.chord").append("svg").attr("width",chordWidth+chordMargin.left+chordMargin.right).attr("height",chordHeight+chordMargin.top+chordMargin.bottom),chordTitleWrapper=svgChord.append("g").attr("class","chordTitleWrapper"),chordExplanationWrapper=svgChord.append("g").attr("class","chordExplanationWrapper"),chordWrapper=svgChord.append("g").attr("class","chordWrapper"),chordRadius=Math.min(chordWidth,chordHeight)/2-(mobileScreen?80:100),titleOffset=40;chordTitleWrapper.append("text").attr("class","chordSubTitle left").attr("x",chordWidth/2+chordMargin.left-chordRadius-50).attr("y",titleOffset).style("text-anchor","middle").attr("fill","#3B3B3B").style("font-size","12px").text("Opleidingen"),chordTitleWrapper.append("line").attr("class","chordSubTitleLine left").attr("x1",.6*(chordWidth/2+chordMargin.left-chordRadius-50)).attr("x2",1.4*(chordWidth/2+chordMargin.left-chordRadius-50)).attr("y1",titleOffset+8).attr("y2",titleOffset+8).style("stroke","#DCDCDC").style("shape-rendering","crispEdges"),chordTitleWrapper.append("text").attr("class","chordSubTitle right").attr("x",chordWidth/2+chordMargin.left+chordRadius+50).attr("y",titleOffset).style("text-anchor","middle").attr("fill","#3B3B3B").style("font-size","12px").text("Beroepen"),chordTitleWrapper.append("line").attr("class","chordSubTitleLine right").attr("x1",.6*(chordWidth/2+chordMargin.left-chordRadius-50)+2*(chordRadius+50)).attr("x2",1.4*(chordWidth/2+chordMargin.left-chordRadius-50)+2*(chordRadius+50)).attr("y1",titleOffset+8).attr("y2",titleOffset+8).style("stroke","#DCDCDC").style("shape-rendering","crispEdges"),chordTitleWrapper.append("text").attr("class","chordTitleNiveau").attr("x",chordWidth/2+chordMargin.left).attr("y",.15*chordHeight+chordMargin.bottom).style("text-anchor","middle").attr("fill","#5E5E5E").style("font-size","16px").text("HBO"),drawChord(chordWidth,chordHeight,chordMargin);
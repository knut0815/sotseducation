function drawChord(t,e,r){function n(){return"#00A1DE"}function a(){return v().padding(.02).sortChords(d3.ascending)}function o(t){layout=a(),layout.matrix(t);var e=$.selectAll("g.group").data(layout.groups(),function(t){return t.index});e.exit().transition().duration(1500).style("opacity",0).remove();var r=e.enter().append("g").attr("class","group").on("mouseover",i(F)).on("mouseout",i(L));r.append("path").style("stroke",function(t,e){return""===W[e]?"none":n(t.index)}).style("fill",function(t,e){return""===W[e]?"none":n(t.index)}).style("pointer-events",function(t,e){return""===W[e]?"none":"auto"}).style("opacity",0).attr("transform",function(t,e){return t.pullOutSize=j*(e>b?-1:1),"translate("+t.pullOutSize+",0)"}),e.select("path").transition().duration(1500).style("opacity",1).attrTween("d",y(A)),e.append("text").attr("class","chordText").attr("dy",".35em").attr("x",0).attr("y",0).attr("fill","#8F8F8F").style("opacity",0).text(function(t){return W[t.index]}).call(wrapChord,120),e.select("text").transition().duration(1500).attr("transform",function(t,e){t.angle=(t.startAngle+t.endAngle)/2+H,t.pullOutSize=j*(e>b?-1:1);var r=G.centroid(t);return"translate("+(r[0]+t.pullOutSize)+","+r[1]+")rotate("+(180*t.angle/Math.PI-90)+")translate(20,0)"+(t.angle>Math.PI?"rotate(180)":"")}).attr("text-anchor",function(t){return t.angle>Math.PI?"end":"begin"}).style("opacity",1),r.append("title"),e.select("title").text(function(t,e){return numFormatPercentDec(t.value/I)+" mensen in "+W[e]});var o=$.selectAll("path.chord").data(layout.chords(),m),u=o.enter().append("path").attr("class","chord").style("stroke","none").style("fill","url(#gradientLinearPerLine)").style("stroke-opacity",0).style("opacity",0).style("pointer-events",function(t){return""===W[t.source.index]?"none":"auto"}).on("mouseover",c).on("mouseout",i(L));u.append("title"),o.select("title").text(function(t){return[numFormatPercentDec(t.source.value/I)," studenten van ",W[t.target.index]," naar de sector ",W[t.source.index]].join("")}),o.exit().transition().duration(500).style("opacity",0).remove(),o.transition().duration(1500).style("opacity",function(t){return""===W[t.source.index]?0:L}).attrTween("d",M(A)),A=layout}function i(t){return function(e,r){$.selectAll("path.chord").filter(function(t){return t.source.index!=r&&t.target.index!=r&&""!=W[t.source.index]}).transition().style("opacity",t)}}function c(t){var e=t;$.selectAll("path.chord").transition().style("opacity",function(t){return t.source.index==e.source.index&&t.target.index==e.target.index?L:F})}function u(t){return t.startAngle+H}function d(t){return t.endAngle+H}function s(){function t(t,e,r,n){var a=e.call(t,r,n),o=i.call(t,a,n),d=c.call(t,a,n)-s,l=u.call(t,a,n)-s;return{r:o,a0:[d],a1:[l],p0:[o*Math.cos(d),o*Math.sin(d)],p1:[o*Math.cos(l),o*Math.sin(l)]}}function e(t,e,r){var n=e[0]>=0?1:-1;return"A"+t+","+t+" 0 "+ +(r>d)+",1 "+(e[0]+n*j)+","+e[1]}function r(t){var e=t[0]>=0?1:-1;return"Q 0,0 "+(t[0]+e*j)+","+t[1]}function n(n,i){var c=t(this,a,n,i),u=t(this,o,n,i);return"M"+(c.p0[0]+j)+","+c.p0[1]+e(c.r,c.p1,c.a1-c.a0)+r(u.p0)+e(u.r,u.p1,u.a1-u.a0)+r(c.p0)+"Z"}var a=h,o=g,i=l,c=p,u=f,d=Math.PI,s=d/2;return n.radius=function(t){return arguments.length?(i=x(t),n):i},n.source=function(t){return arguments.length?(a=x(t),n):a},n.target=function(t){return arguments.length?(o=x(t),n):o},n.startAngle=function(t){return arguments.length?(c=x(t),n):c},n.endAngle=function(t){return arguments.length?(u=x(t),n):u},n}function l(t){return t.radius}function h(t){return t.source}function g(t){return t.target}function p(t){return t.startAngle}function f(t){return t.endAngle}function x(t){return"function"==typeof t?t:function(){return t}}function v(){function t(){var t,d,l,g,p,f={},x=[],v=d3.range(o),y=[];for(r=[],n=[],t=0,g=-1;++g<o;){for(d=0,p=-1;++p<o;)d+=a[g][p];x.push(d),y.push(d3.range(o).reverse()),t+=d}for(i&&v.sort(function(t,e){return i(x[t],x[e])}),c&&y.forEach(function(t,e){t.sort(function(t,r){return c(a[e][t],a[e][r])})}),t=(s-h*o)/t,d=0,g=-1;++g<o;){for(l=d,p=-1;++p<o;){var m=v[g],M=y[m][p],A=a[m][M],W=d,T=d+=A*t;f[m+"-"+M]={index:m,subindex:M,startAngle:W,endAngle:T,value:A}}n[m]={index:m,startAngle:l,endAngle:d,value:(d-l)/t},d+=h}for(g=-1;++g<o;)for(p=g-1;++p<o;){var b=f[g+"-"+p],O=f[p+"-"+g];(b.value||O.value)&&r.push(b.value<O.value?{source:O,target:b}:{source:b,target:O})}u&&e()}function e(){r.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var r,n,a,o,i,c,u,d=Math.PI,s=2*d,l={},h=0;return l.matrix=function(t){return arguments.length?(o=(a=t)&&a.length,r=n=null,l):a},l.padding=function(t){return arguments.length?(h=t,r=n=null,l):h},l.sortGroups=function(t){return arguments.length?(i=t,r=n=null,l):i},l.sortSubgroups=function(t){return arguments.length?(c=t,r=null,l):c},l.sortChords=function(t){return arguments.length?(u=t,r&&e(),l):u},l.chords=function(){return r||t(),r},l.groups=function(){return n||t(),n},l}function y(t){var e={};return t&&t.groups().forEach(function(t){e[t.index]=t}),function(t){var r,n=e[t.index];if(n)r=d3.interpolate(n,t);else{var a={startAngle:u(t),endAngle:u(t)};r=d3.interpolate(a,t)}return function(t){return G(r(t))}}}function m(t){return t.source.index<t.target.index?t.source.index+"-"+t.target.index:t.target.index+"-"+t.source.index}function M(t){var e={};return t&&t.chords().forEach(function(t){e[m(t)]=t}),function(r){var n,a=e[m(r)];if(a)r.source.index!=a.source.index&&(a={source:a.target,target:a.source}),n=d3.interpolate(a,r);else{if(t){var o=t.groups().filter(function(t){return t.index==r.source.index||t.index==r.target.index});a={source:o[0],target:o[1]||o[0]},r.source.index!=a.source.index&&(a={source:a.target,target:a.source})}else a=r;var i={source:{startAngle:a.source.startAngle,endAngle:a.source.startAngle},target:{startAngle:a.target.startAngle,endAngle:a.target.startAngle}};n=d3.interpolate(i,r)}return function(t){return N(n(t))}}}var A,W=["Administratief personeel","Ambachtslieden","Bedrijfsbeheer (vak)specialisten","Elementaire beroepen","Gezondheidszorg (vak)specialisten","IT (vak)specialisten","Juridisch/Culturele (vak)specialisten","Leidinggevende functies","Onderwijsgevenden","Verkopers en verleners persoonlijke diensten","Verzorgend personeel","Wetenschap/Techniek (vak)specialisten","Overig","","Techniek","Onderwijs","Landbouw","Kunst, Taal en Cultuur","Gezondheidszorg","Gedrag & Maatschappij","Economie",""],T=.5,b=13,O=17533,C=O,k=Math.round(O*T),w=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,65,44,57,39,123,1373,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,11,0,0,24,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,173,43,52,55,36,125,2413,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,16,13,23,10,37,54,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,161,24,17,0,2089,85,60,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,510,0,0,57,0,0,251,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,118,10,454,99,1537,271,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,76,21,10,15,125,41,261,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,2206,37,292,32,116,76,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,74,43,116,51,135,752,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,34,0,22,27,156,36,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1141,0,111,291,0,0,48,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,39,0,0,20,109,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,k],[232,32,173,32,161,510,16,76,32,96,15,1141,36,0,0,0,0,0,0,0,0,0],[65,0,43,16,24,0,118,21,2206,74,34,0,0,0,0,0,0,0,0,0,0,0],[44,0,52,13,17,0,10,10,37,43,0,111,39,0,0,0,0,0,0,0,0,0],[57,11,55,23,0,57,454,15,292,116,22,291,0,0,0,0,0,0,0,0,0,0],[39,0,36,10,2089,0,99,125,32,51,27,0,0,0,0,0,0,0,0,0,0,0],[123,0,125,37,85,0,1537,41,116,135,156,0,20,0,0,0,0,0,0,0,0,0],[1373,24,2413,54,60,251,271,261,76,752,36,48,109,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,k,0,0,0,0,0,0,0,0]],S=2*Math.PI/360*(k/(O+k))*360/4,B=21328,E=B,k=Math.round(B*T),z=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,320,0,42,0,88,122,1152,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,2187,0,43,0,19,0,105,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,0,0,0,20,19,285,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,428,0,192,0,354,219,686,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,103,0,37,0,1518,30,31,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,93,0,0,0,0,0,213,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,125,0,25,0,536,567,132,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,0,0,12,10,61,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,35,36,12,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,549,0,305,0,1069,621,2704,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,54,0,10,0,2095,1283,112,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,485,0,22,0,18,10,23,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1064,0,302,0,91,49,515,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,k],[320,2187,45,428,103,93,125,32,13,549,54,485,1064,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[42,43,0,192,37,0,25,0,0,305,10,22,302,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[88,19,20,354,1518,0,536,12,35,1069,2095,18,91,0,0,0,0,0,0,0,0,0],[122,0,19,219,30,0,567,10,36,621,1283,10,49,0,0,0,0,0,0,0,0,0],[1152,105,285,686,31,213,132,61,12,2704,112,23,515,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,k,0,0,0,0,0,0,0,0]],R=2*Math.PI/360*(k/(B+k))*360/4,P=Math.min(t,e)/2-(mobileScreen?80:100),D=.95*P,H=S,I=C,j=mobileScreen?20:50,L=.6,F=.02,G=(d3.format("%"),d3.svg.arc().innerRadius(D).outerRadius(P).startAngle(u).endAngle(d)),N=s().radius(D).startAngle(u).endAngle(d);chordWrapper.selectAll("g").remove();var $=chordWrapper.append("g").attr("id","circle").attr("transform","translate("+(t/2+r.left)+","+(e/2+r.top)+")");o(w),d3.select("#ChordHBObutton").on("click",function(){H=S,I=C,chordTitleWrapper.select(".chordTitleNiveau").text("HBO"),o(w)}),d3.select("#ChordMBObutton").on("click",function(){H=R,I=E,chordTitleWrapper.select(".chordTitleNiveau").text("MBO"),o(z)})}var mobileScreen=$(window).width()>400?!1:!0,chordMargin={left:50,top:10,right:50,bottom:10},chordWidth=Math.min($(".dataresource.chord").width(),800)-chordMargin.left-chordMargin.right,chordHeight=(mobileScreen?300:5*Math.min($(".dataresource.chord").width(),800)/6)-chordMargin.top-chordMargin.bottom,svgChord=d3.select(".dataresource.chord").append("svg").attr("width",chordWidth+chordMargin.left+chordMargin.right).attr("height",chordHeight+chordMargin.top+chordMargin.bottom),chordTitleWrapper=svgChord.append("g").attr("class","chordTitleWrapper"),chordExplanationWrapper=svgChord.append("g").attr("class","chordExplanationWrapper"),chordWrapper=svgChord.append("g").attr("class","chordWrapper"),chordRadius=Math.min(chordWidth,chordHeight)/2-(mobileScreen?80:100),titleOffset=40;chordTitleWrapper.append("text").attr("class","chordSubTitle left").attr("x",chordWidth/2+chordMargin.left-chordRadius-50).attr("y",titleOffset).style("text-anchor","middle").attr("fill","#3B3B3B").style("font-size","12px").text("Opleidingen"),chordTitleWrapper.append("line").attr("class","chordSubTitleLine left").attr("x1",.6*(chordWidth/2+chordMargin.left-chordRadius-50)).attr("x2",1.4*(chordWidth/2+chordMargin.left-chordRadius-50)).attr("y1",titleOffset+8).attr("y2",titleOffset+8).style("stroke","#DCDCDC").style("shape-rendering","crispEdges"),chordTitleWrapper.append("text").attr("class","chordSubTitle right").attr("x",chordWidth/2+chordMargin.left+chordRadius+50).attr("y",titleOffset).style("text-anchor","middle").attr("fill","#3B3B3B").style("font-size","12px").text("Beroepen"),chordTitleWrapper.append("line").attr("class","chordSubTitleLine right").attr("x1",.6*(chordWidth/2+chordMargin.left-chordRadius-50)+2*(chordRadius+50)).attr("x2",1.4*(chordWidth/2+chordMargin.left-chordRadius-50)+2*(chordRadius+50)).attr("y1",titleOffset+8).attr("y2",titleOffset+8).style("stroke","#DCDCDC").style("shape-rendering","crispEdges"),chordTitleWrapper.append("text").attr("class","chordTitleNiveau").attr("x",chordWidth/2+chordMargin.left).attr("y",.15*chordHeight+chordMargin.bottom).style("text-anchor","middle").attr("fill","#5E5E5E").style("font-size","16px").text("HBO"),drawChord(chordWidth,chordHeight,chordMargin);